@using ABCLearn.DataContext
@{
	ViewBag.title = "ABC Learn";
	var pattern = "/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,32}$/";
	List<string> StudentEmail = new List<string>();
	StudentDAO.Instance.Students().ForEach(x => StudentEmail.Add(x.Email));
}
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	@Html.Partial("_head")
</head>
<body class=" hero-header">
	@Html.Partial("_navStart")
	<a href="@Url.Action("Index", "Home")" class="nav-item nav-link">Home</a>
	<a href="@Url.Action("About", "Home")" class="nav-item nav-link">About US</a>
	<a href="@Url.Action("Course", "Home")" class="nav-item nav-link">Course</a>
	<a href="@Url.Action("Contact", "Home")" class="nav-item nav-link">Contact</a>
	@Html.Partial("_navEnd")

	<div class="container-fluid bg-primary mb-5 hero-header">
		<div class="container py-2">
			<div class="row justify-content-center py-5">
				<h1 class="text-center text-white animated slideInDown">Welcome to ABC-Learning</h1>
			</div>
			<div class="container">
				<div class="row justify-content-center py-1">
					<div id="loginForm" class="col-md-4 py-5 title wow" data-wow-delay="0.2s">
						<h1 class="text-center text-white">Login</h1>
						<form action="@Url.Action("Login", "Login")">
							<p class="text-center" style="color: red">@TempData["MessError"]</p>
							<div class="form-group">
								<label for="loginUsername">Email:</label>
								<input type="email" class="form-control" name="Email" id="loginEmail" placeholder="Enter email" required>
							</div>

							<div class="form-group">
								<label for="loginPassword">Password:</label>
								<input type="password" name="Password" class="form-control" id="loginPassword" placeholder="Enter password" required>
							</div>
							<p class=".align-text-center">Login with</p>
							<div class="form-group row justify-content-center">
								<button type="submit" class=" btn btn-primary col-md-5 border-1 button" name="submitButton" value="Sutdent" id="loginStudent" placeholder="" required>Student</button>
								<div class="col-1"></div>
								<button type="submit" class=" btn btn-primary col-md-5 border-1 button" name="submitButton" value="Lecturer" id="loginLecture" placeholder="" required>Lecture</button>
							</div>
						</form>
						<p>Do not have an account? <a href="#" onclick="showRegisterForm()">Register</a> Or have you <a href="#" onclick="showForgotpass()">forgotten your password</a>?</p>
					</div>
					 
					<div id="registerForm" style="display:none" class="col-md-6 title wow" data-wow-delay="0.2s">
						<h2 class="text-center text-white">Register</h2>
						<form class="row">
							<div id="left-form" class="col-6 col-md-6">
								<div class="form-group">
									<label for="registerUsername">First Name</label>
									<input type="text" name="Firstname" class="form-control" id="registerFirstname" placeholder="Enter First Name" required>
								</div>
								<div class="form-group">
									<label for="registerUsername">Last Name</label>
									<input type="text" name="LastName" class="form-control" id="registerLastname" placeholder="Enter Last Name" required>
								</div>

								<div class="form-group">
									<label for="registerEmail">Gander</label>
									<select name="Gander" class="form-control">
										<option value="Male">
											Male
										</option>
										<option value="Female">Female</option>
									</select>
								</div>
								<div class="form-group">
									<label for="registerEmail">Email</label>
									<input id="emailRegister" type="email" name="Email" class="form-control" placeholder="Enter Email" required>
									<span id="spanEmail" style="color:red; display: none">This Mail existed</span>
								</div>
							</div>

							<div id="right-form" class="col-6 col-md-6">
								<div class="form-group">
									<label for="registerEmail">Date of birthday</label>
									<input type="date" name="DOB" class="form-control" id="registerEmail" placeholder="Enter Email" required>
								</div>
								<div class="form-group">
									<label for="registerPassword">Phone number</label>
									<input type="tel" name="Phone" class="form-control" id="registerPhonenumber" placeholder="Enter Phone number" required>
								</div>
								<div class="form-group">
									<label for="registerPassword">Password</label>
									<input type="password" name="Password" class="form-control" id="registerPassword" placeholder="Enter Password EX:Abc123@@" required>
									<span id="spanPass" style="color:red; display: none">Not correct </span>
								</div>
								<div class="form-group">
									<label for="registerPassword">Confirm password</label>
									<input type="password" class="form-control" id="registerConfirmPassword" placeholder="Enter Confirm password" required>
									<span id="spanConfirmpass" style="color:red; display:none">Password not correct</span>
								</div>
							</div>

							<button id="btnRegister" type="submit" class="btn btn-primary">Register</button>
						</form>
						<p>Do have an account?<a href="#" onclick="showLoginForm()">Login</a> Or have you <a href="#" onclick="showForgotpass()">forgotten your password</a>?</p>
					</div>
					
					<div id="forgotPass" style="display:none; margin: 50px 0 160px 0" class="col-md-6 title justify-content-center wow" data-wow-delay="0.2s">
						<h2 class="text-center text-white">Forgot password</h2>
						<form class="row col-12 justify-content-center">
							<div id="left-form" class="col-10 col-md-10 justify-content-center">
								<div class="form-group">
									<label for="registerUsername">Your Email</label>
									<input type="email" name="Email" class="form-control" id="registerFirstname" placeholder="Enter your Email" required>
									<label for="Rolename">You are </label>
									<select name="Role" id="Rolename" class="form-control">
										<option value="Student">
											Student
										</option>
										<option value="Lecturer">Lecturer</option>
									</select>
								</div>
								<button type="submit" class="btn btn-primary">Reset</button>
								<p>Do have an account?<a href="#" onclick="showLoginForm()">Login</a> Or have you <a href="#" onclick="showForgotpass()">forgotten your password</a>?</p>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<script>
		var listEmail = @Html.Raw(Json.Serialize(StudentEmail));
		var count = 0;
		var btnRegister = document.querySelector("#btnRegister")
		document.querySelector("#emailRegister").addEventListener('change',(e)=>{
			var value = e.target.value;
			function check() { return listEmail.includes(value) }
			checked("#spanEmail", check, value)
		})

		document.querySelector("#registerPassword").addEventListener('change', (e) => {
			var value = e.target.value;
			function check(){return !validatePassword(value) }
			checked("#spanPass", check, value)
			enableSubmit()
		})

		document.querySelector("#registerConfirmPassword").addEventListener('change', (e) => {
			var value = e.target.value;
			function check() { return !(value == document.querySelector("#registerPassword").value) }
			checked("#spanConfirmpass", check, value)
			enableSubmit()
		})

		function enableSubmit(){
			if(count>=3){
				console.log("ok");
			}
		}
		console.log(document.querySelector("#spanConfirmpass").style.display == "none")
		function checked(span, callback, value){
			if (value) {
				var check = callback()
				if (check) {
					document.querySelector(span).style.display = "block";
				} else {
					document.querySelector(span).style.display = "none";
				}
			} else {
				document.querySelector(span).style.display = "none";
			}
		}

		function validatePassword(password) {
			var pattern = @pattern;
		  return pattern.test(password);
		}

		function showForgotpass(){
			document.getElementById("forgotPass").style.display = "block";
			document.getElementById("loginForm").style.display = "none";
			document.getElementById("registerForm").style.display = "none";
		}

		function showRegisterForm() {
			document.getElementById("forgotPass").style.display = "none";
			document.getElementById("loginForm").style.display = "none";
			document.getElementById("registerForm").style.display = "block";
		}

		function showLoginForm() {
			document.getElementById("loginForm").style.display = "block";
			document.getElementById("registerForm").style.display = "none";
			document.getElementById("forgotPass").style.display = "none";
		}
	</script>
</body>
</html>
