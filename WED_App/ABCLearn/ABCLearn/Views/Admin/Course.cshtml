@using ABCLearn.DataContext
@using ABCLearn.DataAccess
@{
	ViewBag.title = "ABC Learn";
	var Courses = Model;
	int numOfCourse = CourseDAO.Instance.Courses().Count;
	if (numOfCourse % 8 == 0)
	{
		numOfCourse = numOfCourse / 8;
	}
	else
	{
		numOfCourse = (numOfCourse / 8) + 1;
	}
}

<!DOCTYPE html>
<html lang="en">

<head>
	@Html.Partial("_head")
</head>

<body>
	@Html.Partial("_navAdmin")
	<!-- tab search dictionary -->
	<div class="container-fluid bg-primary hero-header">
		<div class="container py-5">
			<div class="row justify-content-center">
				<div class="col-lg-10 text-center">
					<h1 class="display-3 text-white"></h1>
				</div>
			</div>
		</div>
	</div>

	<div class="container">
		<h2 class="text-center">Course Table</h2>
		<div class="row">
			<div class="col-3"></div>
			<a type="submit" name="btnStudentAdmin" onclick="formTable()" class="addModelbtn col-6 btn btn-primary" value="Delete">Add New</a>
			<div class="col-3"></div>
		</div>

		<div id="addModal" class="modal fade p-lg-5" role="dialog">
			<div class="modal-dialog modal-lg" role="content">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title text-dark">ADD New Course</h4>
						<ion-icon class="closeForm" style="cursor: pointer;" onclick="formTable()" name="close-outline"></ion-icon>
					</div>
					<div class="modal-body">
						<form action="@Url.Action("AddNewCourse","Course")" enctype="multipart/form-data">
							<div class="form-row row">
								<div class="row col-6">
									<div class="form-group p-md-2">
										<label class="sr-only" for="Firstname">Title</label>
										<input type="text" name="Title" class="form-control text-secondary form-control-sm mr-1"
											   placeholder="Title" required>
									</div>
									<div class="form-group p-md-2">
										<label class="sr-only" for="LastName">Detail</label>
										<input type="text" name="Detail" class="form-control text-secondary form-control-sm mr-1"
											   placeholder="Detail" required>

									</div>
								</div>
								<div class="row col-6">
									<div class="form-group p-md-2">
										<label class="sr-only" for="Phone">Price</label>
										<input type="number" name="Price" class="form-control text-secondary form-control-sm mr-1"
											   placeholder="Price" required>
									</div>
									<div class="form-group p-md-2">
										<label class="sr-only" for="EmailLecturer">Sale</label>
										<input type="number" name="Sale" class="form-control text-secondary form-control-sm mr-1"
											   placeholder="Sale" required>
									</div>
								</div>
							</div>
							<div class="row col-12">
								<div class="form-group p-md-2">
									<label class="sr-only" for="password">Lecturer</label>
									<select class="form-control" name="IDLecturer" placeholder="First Name">
										@foreach (Lecturer item in LecturerDAO.Instance.Lecturers())
										{
											<option value="@item.Id">@item.FirstName @item.LastName</option>
										}
									</select>
								</div>
							</div>
							<div class="form-row p-md-3 center">
								<button type="button" onclick="formTable()" class="btn btn-secondary btn-sm ml-auto cancelForm">Cancel</button>
								<button type="submit" class="btn btn-primary btn-sm ml-1">Submit</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<table class="table table-striped text-center">
			<thead>
				<tr>
					<th>ID</th>
					<th>Title</th>
					<th>Price</th>
					<th>Sale</th>
					<th>Lecturer</th>
					<th>Slot</th>
					<th>Number Of Student</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var course in Courses)
				{
					<tr>
						<td>@course.Id</td>
						<td>@course.Title</td>
						<td>@course.Price</td>
						<td>@course.Sale %</td>
						@if (course.Lecturer == null)
						{
							<td>No body</td>
						}
						else
						{
							<td>@course.Lecturer.FirstName @course.Lecturer.FirstName</td>
						}
						<td>@course.Calendars.Count</td>
						<td>@course.Quantity / 30</td>
						<td>
							<div class="d-flex row">
								<a href="@Url.Action("ViewCourse", "Course", new{IdCourse = course.Id})" name="btnStudentAdmin" class="col-7 btn btn-primary">View</a>
								@if (course.Status)
								{
									<a href="@Url.Action("SetStatus", "Course", new{Id = course.Id, Status = true})" type="submit" name="btnStudentAdmin" class="col-5 btn btn-primary" value="Delete" style="color: red">Lock</a>
								}
								else
								{
									<a href="@Url.Action("SetStatus", "Course", new{Id = course.Id, Status = false})" type="buttom" name="btnStudentAdmin" class="col-5 btn btn-primary" value="Delete" style="color: red">UnLock</a>
								}
							</div>
						</td>
					</tr>
				}
			</tbody>
		</table>
		<div class="justify-content-center ">
			@for (int i = 0; i < numOfCourse; i++)
			{
				<a href="@Url.Action("Course", "Admin", new{page = i, max = numOfCourse})">@(i + 1)</a>
			}
		</div>
	</div>
	<script src="~/js/AdminSet.js"></script>
	@Html.Partial("_endScript")
</body>

</html>